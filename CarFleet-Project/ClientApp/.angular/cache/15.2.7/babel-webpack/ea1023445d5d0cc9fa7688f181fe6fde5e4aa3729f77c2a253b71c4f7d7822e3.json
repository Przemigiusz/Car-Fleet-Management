{"ast":null,"code":"import { Vehicle } from '../../models/Vehicle';\nimport { FormGroup, Validators } from '@angular/forms';\nimport { ReplaySubject, takeUntil } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/vehicles.service\";\nimport * as i2 from \"../../services/equipment.service\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"../../services/filters.service\";\nimport * as i5 from \"@angular/common\";\nfunction NewCarComponent_option_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"option\", 43);\n  }\n  if (rf & 2) {\n    const brand_r5 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", brand_r5.brandName);\n  }\n}\nfunction NewCarComponent_option_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"option\", 43);\n  }\n  if (rf & 2) {\n    const model_r6 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", model_r6.modelName);\n  }\n}\nfunction NewCarComponent_option_55_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"option\", 43);\n  }\n  if (rf & 2) {\n    const transmissionType_r7 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", transmissionType_r7.typeName);\n  }\n}\nfunction NewCarComponent_option_62_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"option\", 43);\n  }\n  if (rf & 2) {\n    const carbody_r8 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", carbody_r8.carbodyName);\n  }\n}\nfunction NewCarComponent_div_70_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 44)(1, \"input\", 45);\n    i0.ɵɵlistener(\"click\", function NewCarComponent_div_70_Template_input_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const opElement_r9 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.updateValue(opElement_r9));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"label\", 46);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const opElement_r9 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"id\", opElement_r9.eqElement.elementName);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"for\", opElement_r9.eqElement.elementName);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(opElement_r9.eqElement.elementName);\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    \"displayOptions\": a0\n  };\n};\nexport class NewCarComponent {\n  displaySelectOptions() {\n    this.optionsExpanded ? this.optionsExpanded = false : this.optionsExpanded = true;\n  }\n  updateValue(opElement) {\n    if (opElement.isChecked === false) {\n      opElement.isChecked = true;\n    } else {\n      opElement.isChecked = false;\n    }\n  }\n  constructor(addCarService, getEquipmentElementsService, formBuilder, getFiltersService, renderer, elRef) {\n    this.addCarService = addCarService;\n    this.getEquipmentElementsService = getEquipmentElementsService;\n    this.formBuilder = formBuilder;\n    this.getFiltersService = getFiltersService;\n    this.renderer = renderer;\n    this.elRef = elRef;\n    this.isExpanded = false;\n    this.addCarForm = new FormGroup({});\n    this.vehicleImages = []; //Photos of the car\n    this.onDestroy$ = new ReplaySubject(1);\n    this.optionsExpanded = false;\n  }\n  ngOnDestroy() {\n    this.onDestroy$.next(true);\n    this.onDestroy$.complete();\n  }\n  ngOnInit() {\n    this.initForm();\n    this.getEquipmentElementsService.getEquipmentElements().pipe(takeUntil(this.onDestroy$)).subscribe({\n      next: r => {\n        this.equipment = r;\n        this.operationalEquipment = [];\n        for (const el of this.equipment) {\n          this.operationalEquipment.push({\n            eqElement: el,\n            isChecked: false\n          });\n        }\n      },\n      error: err => {\n        console.log(\"error\", err);\n      }\n    }), this.getFiltersService.getCarbodies().pipe(takeUntil(this.onDestroy$)).subscribe({\n      next: r => {\n        this.carbodies = r;\n      },\n      error: err => {\n        console.log(\"error\", err);\n      }\n    });\n    this.getFiltersService.getFuels().pipe(takeUntil(this.onDestroy$)).subscribe({\n      next: r => {\n        this.fuels = r;\n      },\n      error: err => {\n        console.log(\"error\", err);\n      }\n    });\n    this.getFiltersService.getTransmissionTypes().pipe(takeUntil(this.onDestroy$)).subscribe({\n      next: r => {\n        this.transmissionTypes = r;\n      },\n      error: err => {\n        console.log(\"error\", err);\n      }\n    }), this.getFiltersService.getModels().pipe(takeUntil(this.onDestroy$)).subscribe({\n      next: r => {\n        this.models = r;\n      },\n      error: err => {\n        console.log(\"error\", err);\n      }\n    }), this.getFiltersService.getBrands().pipe(takeUntil(this.onDestroy$)).subscribe({\n      next: r => {\n        this.brands = r;\n      },\n      error: err => {\n        console.log(\"error\", err);\n      }\n    });\n  }\n  initForm() {\n    this.addCarForm = this.formBuilder.group({\n      brand: ['', Validators.required],\n      model: ['', Validators.required],\n      yearOfProduction: ['', Validators.required],\n      mileage: ['', Validators.required],\n      fuel: ['', Validators.required],\n      doorsAmount: ['', Validators.required],\n      carbodyType: ['', Validators.required],\n      transmissionType: ['', Validators.required],\n      vehicleImage: [null, Validators.required]\n    });\n  }\n  fileChanged(event) {\n    const imageInputElement = event.target;\n    if (imageInputElement.files && imageInputElement.files.length > 0) {\n      const files = imageInputElement.files;\n      for (const file of files) {\n        this.vehicleImages.push(file);\n      }\n    }\n  }\n  submitForm() {\n    if (this.addCarForm.valid) {\n      const formData = this.addCarForm.value;\n      const newVehicle = new Vehicle();\n      newVehicle.brandId = this.brands.find(brand => brand.brandName === formData.brand).brandId;\n      newVehicle.modelId = this.models.find(model => model.modelName === formData.model).modelId;\n      newVehicle.yearOfProduction = formData.yearOfProduction;\n      newVehicle.mileage = formData.mileage;\n      formData.fuels.forEach(f1 => {\n        const matchingFuel = this.fuels.find(f2 => f2.fuelName === f1);\n        if (matchingFuel) {\n          newVehicle.fuels.push(matchingFuel);\n        }\n      });\n      newVehicle.doorsAmount = formData.doorsAmount;\n      newVehicle.carbodyId = this.carbodies.find(c => c.carbodyName === formData.carBodyType).carbodyId;\n      for (const opElement of this.operationalEquipment) {\n        if (opElement.isChecked === true) {\n          const matchingEquipmentElement = this.equipment.find(ee => ee.elementId === opElement.eqElement.elementId);\n          if (matchingEquipmentElement) {\n            newVehicle.equipment.push(matchingEquipmentElement);\n          }\n        }\n      }\n      this.addCarService.addVehicle(newVehicle).pipe(takeUntil(this.onDestroy$)).subscribe({\n        next: r => {\n          debugger;\n        },\n        error: err => {\n          console.log(\"błąd\"), console.log(err);\n        }\n      });\n    } else {\n      console.log(\"Form is not valid!!!\");\n      this.getFormValidationErrors();\n    }\n  }\n  getFormValidationErrors() {\n    Object.keys(this.addCarForm.controls).forEach((key, value) => {\n      const controlErrors = this.addCarForm.get(key).errors;\n      Object.keys(controlErrors || {}).forEach(keyError => {\n        console.log(`Key control: ${key}, keyError: ${keyError}, errValue: ${controlErrors[keyError]}`);\n      });\n    });\n  }\n  collapse() {\n    this.isExpanded = false;\n  }\n  toggle() {\n    this.isExpanded = !this.isExpanded;\n  }\n}\nNewCarComponent.ɵfac = function NewCarComponent_Factory(t) {\n  return new (t || NewCarComponent)(i0.ɵɵdirectiveInject(i1.VehiclesService), i0.ɵɵdirectiveInject(i2.EquipmentService), i0.ɵɵdirectiveInject(i3.FormBuilder), i0.ɵɵdirectiveInject(i4.FiltersService), i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i0.ElementRef));\n};\nNewCarComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: NewCarComponent,\n  selectors: [[\"new-car\"]],\n  decls: 74,\n  vars: 9,\n  consts: [[1, \"mt-5\", \"mb-5\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"container-fluid\"], [1, \"row\", \"justify-content-center\"], [1, \"col-8\", \"mb-3\"], [\"for\", \"BrandDataList\", 1, \"form-label\"], [\"formControlName\", \"brand\", \"list\", \"datalistOptions\", \"id\", \"BrandDataList\", \"placeholder\", \"Marka\", 1, \"form-control\"], [\"id\", \"BrandDatalistOptions\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"for\", \"ModelDataList\", 1, \"form-label\"], [\"formControlName\", \"model\", \"list\", \"datalistOptions\", \"id\", \"ModelDataList\", \"placeholder\", \"Model\", 1, \"form-control\"], [\"id\", \"ModelDatalistOptions\"], [1, \"col-8\"], [1, \"input-group\", \"mb-3\"], [\"for\", \"exampleDataList\", 1, \"form-label\", \"w-100\"], [\"formControlName\", \"yearOfProduction\", \"type\", \"text\", \"placeholder\", \"Rok produkcji\", \"aria-label\", \"Rok produkcji\", \"aria-describedby\", \"basic-addon1\", 1, \"form-control\"], [\"formControlName\", \"mileage\", \"type\", \"text\", \"placeholder\", \"Przebieg\", \"aria-label\", \"Przebieg\", \"aria-describedby\", \"basic-addon1\", 1, \"form-control\"], [1, \"col-8\", \"mb-3\", \"position-relative\"], [\"for\", \"customSelect\", 1, \"form-label\"], [\"id\", \"customSelect\", 1, \"customSelect\", 3, \"click\"], [1, \"options\", \"position-absolute\", \"w-100\", 3, \"ngClass\"], [1, \"option\"], [\"type\", \"checkbox\", \"id\", \"gasoline\", \"name\", \"gasoline\"], [\"for\", \"gasoline\"], [\"type\", \"checkbox\", \"id\", \"petrol\", \"name\", \"petrol\"], [\"for\", \"petrol\"], [\"type\", \"checkbox\", \"id\", \"diesel\", \"name\", \"diesel\"], [\"for\", \"diesel\"], [\"formControlName\", \"doorsAmount\", \"type\", \"text\", \"placeholder\", \"Liczba drzwi\", \"aria-label\", \"Liczba drzwi\", \"aria-describedby\", \"basic-addon1\", 1, \"form-control\"], [1, \"mb-3\"], [\"for\", \"TransmissionTypeDataList\", 1, \"form-label\"], [\"formControlName\", \"transmissionType\", \"list\", \"datalistOptions\", \"id\", \"TransmissionTypeDataList\", \"placeholder\", \"Rodzaj skrzyni bieg\\u00F3w\", 1, \"form-control\"], [\"id\", \"TransmissionTypeDatalistOptions\"], [\"for\", \"CarbodyDataList\", 1, \"form-label\"], [\"formControlName\", \"carbodyType\", \"list\", \"datalistOptions\", \"id\", \"CarbodyDataList\", \"placeholder\", \"Rodzaj nadwozia\", 1, \"form-control\"], [\"id\", \"CarbodyDatalistOptions\"], [\"for\", \"vehicleImage\", 1, \"form-label\"], [\"formControlName\", \"vehicleImage\", \"id\", \"vehicleImage\", \"type\", \"file\", \"multiple\", \"\", 1, \"form-control\", 3, \"change\"], [1, \"col-8\", \"mb-5\"], [1, \"row\"], [\"class\", \"col-4 mb-2 d-flex justify-content-center\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-8\", \"d-flex\", \"justify-content-center\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"w-auto\", \"submitBtn\"], [3, \"value\"], [1, \"col-4\", \"mb-2\", \"d-flex\", \"justify-content-center\"], [\"type\", \"checkbox\", \"autocomplete\", \"off\", 1, \"btn-check\", 3, \"id\", \"click\"], [1, \"btn\", \"btn-outline-primary\", 3, \"for\"]],\n  template: function NewCarComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"section\", 0)(1, \"form\", 1);\n      i0.ɵɵlistener(\"ngSubmit\", function NewCarComponent_Template_form_ngSubmit_1_listener() {\n        return ctx.submitForm();\n      });\n      i0.ɵɵelementStart(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"label\", 5);\n      i0.ɵɵtext(6, \"Marka\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(7, \"input\", 6);\n      i0.ɵɵelementStart(8, \"datalist\", 7);\n      i0.ɵɵtemplate(9, NewCarComponent_option_9_Template, 1, 1, \"option\", 8);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(10, \"div\", 4)(11, \"label\", 9);\n      i0.ɵɵtext(12, \"Model\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(13, \"input\", 10);\n      i0.ɵɵelementStart(14, \"datalist\", 11);\n      i0.ɵɵtemplate(15, NewCarComponent_option_15_Template, 1, 1, \"option\", 8);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(16, \"div\", 12)(17, \"div\", 13)(18, \"label\", 14);\n      i0.ɵɵtext(19, \"Rok Produkcji\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(20, \"input\", 15);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(21, \"div\", 12)(22, \"div\", 13)(23, \"label\", 14);\n      i0.ɵɵtext(24, \"Przebieg\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(25, \"input\", 16);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(26, \"div\", 17)(27, \"label\", 18);\n      i0.ɵɵtext(28, \"Rodzaj paliwa\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(29, \"div\", 19);\n      i0.ɵɵlistener(\"click\", function NewCarComponent_Template_div_click_29_listener() {\n        return ctx.displaySelectOptions();\n      });\n      i0.ɵɵtext(30, \"Wybierz rodzaje paliwa\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(31, \"div\", 20)(32, \"div\", 21);\n      i0.ɵɵelement(33, \"input\", 22);\n      i0.ɵɵelementStart(34, \"label\", 23);\n      i0.ɵɵtext(35, \"Gasoline\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(36, \"div\", 21);\n      i0.ɵɵelement(37, \"input\", 24);\n      i0.ɵɵelementStart(38, \"label\", 25);\n      i0.ɵɵtext(39, \"Petrol\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(40, \"div\", 21);\n      i0.ɵɵelement(41, \"input\", 26);\n      i0.ɵɵelementStart(42, \"label\", 27);\n      i0.ɵɵtext(43, \"Diesel\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(44, \"div\", 12)(45, \"div\", 13)(46, \"label\", 14);\n      i0.ɵɵtext(47, \"Liczba drzwi\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(48, \"input\", 28);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(49, \"div\", 12)(50, \"div\", 29)(51, \"label\", 30);\n      i0.ɵɵtext(52, \"Rodzaj skrzyni bieg\\u00F3w\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(53, \"input\", 31);\n      i0.ɵɵelementStart(54, \"datalist\", 32);\n      i0.ɵɵtemplate(55, NewCarComponent_option_55_Template, 1, 1, \"option\", 8);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(56, \"div\", 12)(57, \"div\", 29)(58, \"label\", 33);\n      i0.ɵɵtext(59, \"Rodzaj nadwozia\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(60, \"input\", 34);\n      i0.ɵɵelementStart(61, \"datalist\", 35);\n      i0.ɵɵtemplate(62, NewCarComponent_option_62_Template, 1, 1, \"option\", 8);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(63, \"div\", 12)(64, \"div\", 29)(65, \"label\", 36);\n      i0.ɵɵtext(66, \"Zdj\\u0119cie pojazdu\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(67, \"input\", 37);\n      i0.ɵɵlistener(\"change\", function NewCarComponent_Template_input_change_67_listener($event) {\n        return ctx.fileChanged($event);\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(68, \"div\", 38)(69, \"div\", 39);\n      i0.ɵɵtemplate(70, NewCarComponent_div_70_Template, 4, 3, \"div\", 40);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(71, \"div\", 41)(72, \"button\", 42);\n      i0.ɵɵtext(73, \"Dodaj pojazd\");\n      i0.ɵɵelementEnd()()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"formGroup\", ctx.addCarForm);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngForOf\", ctx.brands);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngForOf\", ctx.models);\n      i0.ɵɵadvance(16);\n      i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(7, _c0, ctx.optionsExpanded));\n      i0.ɵɵadvance(24);\n      i0.ɵɵproperty(\"ngForOf\", ctx.transmissionTypes);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngForOf\", ctx.carbodies);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngForOf\", ctx.operationalEquipment);\n    }\n  },\n  dependencies: [i5.NgClass, i5.NgForOf, i3.ɵNgNoValidate, i3.NgSelectOption, i3.ɵNgSelectMultipleOption, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.FormControlName],\n  styles: [\"section[_ngcontent-%COMP%] {\\r\\n  font-family: 'Roboto', sans-serif;\\r\\n}\\r\\n\\r\\n.submitBtn[_ngcontent-%COMP%] {\\r\\n  background-color: #7743DB;\\r\\n}\\r\\n\\r\\n.btn-outline-primary[_ngcontent-%COMP%] {\\r\\n  --bs-btn-color: #7743DB;\\r\\n  --bs-btn-border-color: #7743DB;\\r\\n  --bs-btn-hover-color: #fff;\\r\\n  --bs-btn-hover-bg: #7743DB;\\r\\n  --bs-btn-hover-border-color: #7743DB;\\r\\n  --bs-btn-focus-shadow-rgb: 13,110,253;\\r\\n  --bs-btn-active-color: #fff;\\r\\n  --bs-btn-active-bg: #7743DB;\\r\\n  --bs-btn-active-border-color: #7743DB;\\r\\n  --bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);\\r\\n  --bs-btn-disabled-color: #7743DB;\\r\\n  --bs-btn-disabled-bg: transparent;\\r\\n  --bs-btn-disabled-border-color: #7743DB;\\r\\n  --bs-gradient: none;\\r\\n}\\r\\n\\r\\n.customSelect[_ngcontent-%COMP%] {\\r\\n  padding: .375rem 2.25rem .375rem .75rem;\\r\\n  font-size: 1rem;\\r\\n  font-weight: 400;\\r\\n  line-height: 1.5;\\r\\n  color: rgb(133, 133, 133);\\r\\n  border-style: solid;\\r\\n  border-color: #ced4da;\\r\\n  border-width: 1px;\\r\\n  border-radius: 0.375rem;\\r\\n  cursor: pointer;\\r\\n  background-color: #fff;\\r\\n}\\r\\n\\r\\n.customSelect[_ngcontent-%COMP%]::after {\\r\\n  content: '\\\\23F7';\\r\\n  position: absolute;\\r\\n  right: 2%\\r\\n}\\r\\n\\r\\n.options[_ngcontent-%COMP%] {\\r\\n  color: #212529;\\r\\n  border-style: solid;\\r\\n  border-color: #ced4da;\\r\\n  border-width: 1px;\\r\\n  border-radius: 0.375rem;\\r\\n  cursor: pointer;\\r\\n  background-color: #fff;\\r\\n  z-index: 9999;\\r\\n  margin-left: -12px;\\r\\n  margin-right: -12px;\\r\\n}\\r\\n\\r\\n.option[_ngcontent-%COMP%] {\\r\\n  padding: .375rem .75rem;\\r\\n  font-size: 1rem;\\r\\n  font-weight: 400;\\r\\n  line-height: 1.5;\\r\\n  font-weight: normal;\\r\\n  min-height: 1.2em;\\r\\n  left: 0;\\r\\n  right: 0;\\r\\n}\\r\\n\\r\\n.option[_ngcontent-%COMP%]:first-child {\\r\\n  border-top-left-radius: 0.375rem;\\r\\n  border-top-right-radius: 0.375rem;\\r\\n}\\r\\n\\r\\n.option[_ngcontent-%COMP%]:last-child {\\r\\n  border-bottom-right-radius: 0.375rem;\\r\\n  border-bottom-left-radius: 0.375rem;\\r\\n}\\r\\n\\r\\n.option[_ngcontent-%COMP%]:hover {\\r\\n  background-color: #666;\\r\\n  color: #fff;\\r\\n}\\r\\n\\r\\n.displayOptions[_ngcontent-%COMP%] {\\r\\n  display: none;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbmV3LWNhci9uZXctY2FyLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxpQ0FBaUM7QUFDbkM7O0FBRUE7RUFDRSx5QkFBeUI7QUFDM0I7O0FBRUE7RUFDRSx1QkFBdUI7RUFDdkIsOEJBQThCO0VBQzlCLDBCQUEwQjtFQUMxQiwwQkFBMEI7RUFDMUIsb0NBQW9DO0VBQ3BDLHFDQUFxQztFQUNyQywyQkFBMkI7RUFDM0IsMkJBQTJCO0VBQzNCLHFDQUFxQztFQUNyQyw0REFBNEQ7RUFDNUQsZ0NBQWdDO0VBQ2hDLGlDQUFpQztFQUNqQyx1Q0FBdUM7RUFDdkMsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsdUNBQXVDO0VBQ3ZDLGVBQWU7RUFDZixnQkFBZ0I7RUFDaEIsZ0JBQWdCO0VBQ2hCLHlCQUF5QjtFQUN6QixtQkFBbUI7RUFDbkIscUJBQXFCO0VBQ3JCLGlCQUFpQjtFQUNqQix1QkFBdUI7RUFDdkIsZUFBZTtFQUNmLHNCQUFzQjtBQUN4Qjs7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixrQkFBa0I7RUFDbEI7QUFDRjs7QUFFQTtFQUNFLGNBQWM7RUFDZCxtQkFBbUI7RUFDbkIscUJBQXFCO0VBQ3JCLGlCQUFpQjtFQUNqQix1QkFBdUI7RUFDdkIsZUFBZTtFQUNmLHNCQUFzQjtFQUN0QixhQUFhO0VBQ2Isa0JBQWtCO0VBQ2xCLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLHVCQUF1QjtFQUN2QixlQUFlO0VBQ2YsZ0JBQWdCO0VBQ2hCLGdCQUFnQjtFQUNoQixtQkFBbUI7RUFDbkIsaUJBQWlCO0VBQ2pCLE9BQU87RUFDUCxRQUFRO0FBQ1Y7O0FBRUE7RUFDRSxnQ0FBZ0M7RUFDaEMsaUNBQWlDO0FBQ25DOztBQUVBO0VBQ0Usb0NBQW9DO0VBQ3BDLG1DQUFtQztBQUNyQzs7QUFFQTtFQUNFLHNCQUFzQjtFQUN0QixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxhQUFhO0FBQ2YiLCJzb3VyY2VzQ29udGVudCI6WyJzZWN0aW9uIHtcclxuICBmb250LWZhbWlseTogJ1JvYm90bycsIHNhbnMtc2VyaWY7XHJcbn1cclxuXHJcbi5zdWJtaXRCdG4ge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICM3NzQzREI7XHJcbn1cclxuXHJcbi5idG4tb3V0bGluZS1wcmltYXJ5IHtcclxuICAtLWJzLWJ0bi1jb2xvcjogIzc3NDNEQjtcclxuICAtLWJzLWJ0bi1ib3JkZXItY29sb3I6ICM3NzQzREI7XHJcbiAgLS1icy1idG4taG92ZXItY29sb3I6ICNmZmY7XHJcbiAgLS1icy1idG4taG92ZXItYmc6ICM3NzQzREI7XHJcbiAgLS1icy1idG4taG92ZXItYm9yZGVyLWNvbG9yOiAjNzc0M0RCO1xyXG4gIC0tYnMtYnRuLWZvY3VzLXNoYWRvdy1yZ2I6IDEzLDExMCwyNTM7XHJcbiAgLS1icy1idG4tYWN0aXZlLWNvbG9yOiAjZmZmO1xyXG4gIC0tYnMtYnRuLWFjdGl2ZS1iZzogIzc3NDNEQjtcclxuICAtLWJzLWJ0bi1hY3RpdmUtYm9yZGVyLWNvbG9yOiAjNzc0M0RCO1xyXG4gIC0tYnMtYnRuLWFjdGl2ZS1zaGFkb3c6IGluc2V0IDAgM3B4IDVweCByZ2JhKDAsIDAsIDAsIDAuMTI1KTtcclxuICAtLWJzLWJ0bi1kaXNhYmxlZC1jb2xvcjogIzc3NDNEQjtcclxuICAtLWJzLWJ0bi1kaXNhYmxlZC1iZzogdHJhbnNwYXJlbnQ7XHJcbiAgLS1icy1idG4tZGlzYWJsZWQtYm9yZGVyLWNvbG9yOiAjNzc0M0RCO1xyXG4gIC0tYnMtZ3JhZGllbnQ6IG5vbmU7XHJcbn1cclxuXHJcbi5jdXN0b21TZWxlY3Qge1xyXG4gIHBhZGRpbmc6IC4zNzVyZW0gMi4yNXJlbSAuMzc1cmVtIC43NXJlbTtcclxuICBmb250LXNpemU6IDFyZW07XHJcbiAgZm9udC13ZWlnaHQ6IDQwMDtcclxuICBsaW5lLWhlaWdodDogMS41O1xyXG4gIGNvbG9yOiByZ2IoMTMzLCAxMzMsIDEzMyk7XHJcbiAgYm9yZGVyLXN0eWxlOiBzb2xpZDtcclxuICBib3JkZXItY29sb3I6ICNjZWQ0ZGE7XHJcbiAgYm9yZGVyLXdpZHRoOiAxcHg7XHJcbiAgYm9yZGVyLXJhZGl1czogMC4zNzVyZW07XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XHJcbn1cclxuXHJcbi5jdXN0b21TZWxlY3Q6OmFmdGVyIHtcclxuICBjb250ZW50OiAnXFwyM0Y3JztcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgcmlnaHQ6IDIlXHJcbn1cclxuXHJcbi5vcHRpb25zIHtcclxuICBjb2xvcjogIzIxMjUyOTtcclxuICBib3JkZXItc3R5bGU6IHNvbGlkO1xyXG4gIGJvcmRlci1jb2xvcjogI2NlZDRkYTtcclxuICBib3JkZXItd2lkdGg6IDFweDtcclxuICBib3JkZXItcmFkaXVzOiAwLjM3NXJlbTtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcclxuICB6LWluZGV4OiA5OTk5O1xyXG4gIG1hcmdpbi1sZWZ0OiAtMTJweDtcclxuICBtYXJnaW4tcmlnaHQ6IC0xMnB4O1xyXG59XHJcblxyXG4ub3B0aW9uIHtcclxuICBwYWRkaW5nOiAuMzc1cmVtIC43NXJlbTtcclxuICBmb250LXNpemU6IDFyZW07XHJcbiAgZm9udC13ZWlnaHQ6IDQwMDtcclxuICBsaW5lLWhlaWdodDogMS41O1xyXG4gIGZvbnQtd2VpZ2h0OiBub3JtYWw7XHJcbiAgbWluLWhlaWdodDogMS4yZW07XHJcbiAgbGVmdDogMDtcclxuICByaWdodDogMDtcclxufVxyXG5cclxuLm9wdGlvbjpmaXJzdC1jaGlsZCB7XHJcbiAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogMC4zNzVyZW07XHJcbiAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDAuMzc1cmVtO1xyXG59XHJcblxyXG4ub3B0aW9uOmxhc3QtY2hpbGQge1xyXG4gIGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiAwLjM3NXJlbTtcclxuICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiAwLjM3NXJlbTtcclxufVxyXG5cclxuLm9wdGlvbjpob3ZlciB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzY2NjtcclxuICBjb2xvcjogI2ZmZjtcclxufVxyXG5cclxuLmRpc3BsYXlPcHRpb25zIHtcclxuICBkaXNwbGF5OiBub25lO1xyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["Vehicle","FormGroup","Validators","ReplaySubject","takeUntil","i0","NewCarComponent","displaySelectOptions","optionsExpanded","updateValue","opElement","isChecked","constructor","addCarService","getEquipmentElementsService","formBuilder","getFiltersService","renderer","elRef","ngOnDestroy","onDestroy$","next","complete","ngOnInit","initForm","getEquipmentElements","pipe","subscribe","r","equipment","operationalEquipment","el","push","eqElement","error","err","console","log","getCarbodies","carbodies","getFuels","fuels","getTransmissionTypes","transmissionTypes","getModels","models","getBrands","brands","addCarForm","group","brand","required","model","yearOfProduction","mileage","fuel","doorsAmount","carbodyType","transmissionType","vehicleImage","fileChanged","event","imageInputElement","target","files","length","file","vehicleImages","submitForm","valid","formData","value","newVehicle","brandId","find","brandName","modelId","modelName","forEach","f1","matchingFuel","f2","fuelName","carbodyId","c","carbodyName","carBodyType","matchingEquipmentElement","ee","elementId","addVehicle","getFormValidationErrors","Object","keys","controls","key","controlErrors","get","errors","keyError","collapse","isExpanded","toggle","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\rutko\\source\\repos\\Car-Fleet-Management\\CarFleet-Project\\ClientApp\\src\\app\\new-car\\new-car.component.ts","C:\\Users\\rutko\\source\\repos\\Car-Fleet-Management\\CarFleet-Project\\ClientApp\\src\\app\\new-car\\new-car.component.html"],"sourcesContent":["/* eslint-disable @angular-eslint/component-selector */\r\n/* eslint-disable no-debugger */\r\nimport { Component, Renderer2, ElementRef, OnDestroy, OnInit } from '@angular/core';\r\nimport { VehiclesService } from '../../services/vehicles.service';\r\nimport { EquipmentService } from '../../services/equipment.service';\r\nimport { FiltersService } from '../../services/filters.service';\r\nimport { AddCarInterface } from '../../interfaces/add-car.interface';\r\nimport { Vehicle } from '../../models/Vehicle';\r\nimport { EquipmentElement } from '../../models/EquipmentElement';\r\nimport { FormBuilder, FormGroup, Validators, ValidationErrors } from '@angular/forms';\r\nimport { ReplaySubject, takeUntil } from 'rxjs';\r\nimport { Brand } from '../../models/Brand';\r\nimport { Model } from '../../models/Model';\r\nimport { Fuel } from '../../models/Fuel';\r\nimport { Carbody } from '../../models/Carbody';\r\nimport { TransmissionType } from '../../models/TransmissionType';\r\nimport { OperationalEquipment } from '../../interfaces/operational-equipment.interface';\r\n\r\n@Component({\r\n  selector: 'new-car',\r\n  templateUrl: './new-car.component.html',\r\n  styleUrls: ['./new-car.component.css'],\r\n})\r\nexport class NewCarComponent implements OnInit, OnDestroy {\r\n  private isExpanded = false;\r\n  public addCarForm: FormGroup = new FormGroup({});\r\n\r\n  private equipment: EquipmentElement[]; //Whole equipment elements\r\n  public operationalEquipment: OperationalEquipment[]; //Elements which are available in the car\r\n  public vehicleImages: File[] = []; //Photos of the car\r\n\r\n  public brands: Brand[];\r\n  public models: Model[];\r\n  public fuels: Fuel[];\r\n  public carbodies: Carbody[];\r\n  public transmissionTypes: TransmissionType[];\r\n\r\n  private onDestroy$: ReplaySubject<boolean> = new ReplaySubject<boolean>(1);\r\n\r\n  public optionsExpanded = false;\r\n\r\n  displaySelectOptions() {\r\n    (this.optionsExpanded) ? this.optionsExpanded = false : this.optionsExpanded = true;\r\n  }\r\n\r\n  updateValue(opElement: OperationalEquipment) {\r\n    if (opElement.isChecked === false) {\r\n      opElement.isChecked = true;\r\n    } else {\r\n      opElement.isChecked = false;\r\n    }\r\n }\r\n\r\n  constructor(private addCarService: VehiclesService, private getEquipmentElementsService: EquipmentService,\r\n    private formBuilder: FormBuilder, private getFiltersService: FiltersService, private renderer: Renderer2, private elRef: ElementRef) {}\r\n\r\n  public ngOnDestroy(): void {\r\n    this.onDestroy$.next(true);\r\n    this.onDestroy$.complete();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.initForm();\r\n    this.getEquipmentElementsService.getEquipmentElements()\r\n      .pipe(takeUntil(this.onDestroy$))\r\n      .subscribe(\r\n        {\r\n          next: r => {\r\n            this.equipment = r;\r\n            this.operationalEquipment = [];\r\n            for (const el of this.equipment) {\r\n              this.operationalEquipment.push({ eqElement: el, isChecked: false });\r\n            }\r\n          },\r\n          error: err => { console.log(\"error\", err); }\r\n      }), \r\n\r\n    this.getFiltersService.getCarbodies()\r\n      .pipe(takeUntil(this.onDestroy$))\r\n      .subscribe(\r\n        {\r\n          next: r => { this.carbodies = r; },\r\n          error: err => { console.log(\"error\", err); }\r\n        });\r\n\r\n    this.getFiltersService.getFuels()\r\n      .pipe(takeUntil(this.onDestroy$))\r\n      .subscribe(\r\n        {\r\n          next: r => { this.fuels = r; },\r\n          error: err => { console.log(\"error\", err); }\r\n        });\r\n\r\n    this.getFiltersService.getTransmissionTypes()\r\n      .pipe(takeUntil(this.onDestroy$))\r\n      .subscribe(\r\n        {\r\n          next: r => { this.transmissionTypes = r; },\r\n          error: err => { console.log(\"error\", err); }\r\n        }),\r\n\r\n      this.getFiltersService.getModels()\r\n        .pipe(takeUntil(this.onDestroy$))\r\n        .subscribe(\r\n          {\r\n            next: r => { this.models = r; },\r\n            error: err => { console.log(\"error\", err); }\r\n          }),\r\n\r\n      this.getFiltersService.getBrands()\r\n        .pipe(takeUntil(this.onDestroy$))\r\n        .subscribe(\r\n          {\r\n            next: r => { this.brands = r; },\r\n            error: err => { console.log(\"error\", err); }\r\n          })\r\n  }\r\n\r\n  initForm() {\r\n    this.addCarForm = this.formBuilder.group({\r\n      brand: ['', Validators.required],\r\n      model: ['', Validators.required],\r\n      yearOfProduction: ['', Validators.required],\r\n      mileage: ['', Validators.required],\r\n      fuel: ['', Validators.required],\r\n      doorsAmount: ['', Validators.required],\r\n      carbodyType: ['', Validators.required],\r\n      transmissionType: ['', Validators.required],\r\n      vehicleImage: [null, Validators.required]\r\n    })\r\n  }\r\n \r\n  fileChanged(event: Event) {\r\n    const imageInputElement = event.target as HTMLInputElement;\r\n    if (imageInputElement.files && imageInputElement.files.length > 0) {\r\n      const files = imageInputElement.files;\r\n      for (const file of files) {\r\n        this.vehicleImages.push(file);\r\n      }\r\n    }\r\n  }\r\n\r\n  submitForm() {\r\n    if (this.addCarForm.valid) {\r\n      const formData: AddCarInterface = this.addCarForm.value;\r\n      const newVehicle: Vehicle = new Vehicle();\r\n\r\n      newVehicle.brandId = this.brands.find(brand => brand.brandName === formData.brand)!.brandId!;\r\n      newVehicle.modelId = this.models.find(model => model.modelName === formData.model)!.modelId!;\r\n\r\n      newVehicle.yearOfProduction = formData.yearOfProduction;\r\n      newVehicle.mileage = formData.mileage;\r\n\r\n      formData.fuels.forEach(f1 => {\r\n        const matchingFuel = this.fuels.find(f2 => f2.fuelName === f1);\r\n        if (matchingFuel) {\r\n          newVehicle.fuels.push(matchingFuel);\r\n        }\r\n      })\r\n\r\n      newVehicle.doorsAmount = formData.doorsAmount;\r\n      newVehicle.carbodyId = this.carbodies.find(c => c.carbodyName === formData.carBodyType)!.carbodyId!;\r\n\r\n      for (const opElement of this.operationalEquipment) {\r\n        if (opElement.isChecked === true) {\r\n          const matchingEquipmentElement = this.equipment.find(ee => ee.elementId === opElement.eqElement.elementId);\r\n          if (matchingEquipmentElement) {\r\n            newVehicle.equipment.push(matchingEquipmentElement);\r\n          }\r\n        }\r\n      }\r\n      this.addCarService.addVehicle(newVehicle)\r\n        .pipe(takeUntil(this.onDestroy$))\r\n        .subscribe(\r\n          {\r\n            next: r => { debugger },\r\n            error: err => { console.log(\"błąd\"), console.log(err) }\r\n          });\r\n    }\r\n    else {\r\n      console.log(\"Form is not valid!!!\");\r\n      this.getFormValidationErrors();\r\n    } \r\n  }\r\n\r\n  getFormValidationErrors() {\r\n    Object.keys(this.addCarForm.controls).forEach((key,value) => {\r\n      const controlErrors: ValidationErrors = this.addCarForm.get(key)!.errors!;\r\n      Object.keys(controlErrors || {}).forEach(keyError => {\r\n        console.log(`Key control: ${key}, keyError: ${keyError}, errValue: ${controlErrors[keyError]}`);\r\n      });\r\n    });\r\n  }\r\n\r\n  collapse() {\r\n    this.isExpanded = false;\r\n  }\r\n\r\n  toggle() {\r\n    this.isExpanded = !this.isExpanded;\r\n  }\r\n}\r\n","<section class=\"mt-5 mb-5\">\r\n  <form [formGroup]=\"addCarForm\" (ngSubmit)=\"submitForm()\">\r\n    <div class=\"container-fluid\">\r\n      <div class=\"row justify-content-center\">\r\n        <div class=\"col-8 mb-3\">\r\n          <label for=\"BrandDataList\" class=\"form-label\">Marka</label>\r\n          <input formControlName=\"brand\" class=\"form-control\" list=\"datalistOptions\" id=\"BrandDataList\" placeholder=\"Marka\">\r\n          <datalist id=\"BrandDatalistOptions\">\r\n            <option *ngFor=\"let brand of brands\" [value]=\"brand.brandName\"></option>\r\n          </datalist>\r\n        </div>\r\n        <div class=\"col-8 mb-3\">\r\n          <label for=\"ModelDataList\" class=\"form-label\">Model</label>\r\n          <input formControlName=\"model\" class=\"form-control\" list=\"datalistOptions\" id=\"ModelDataList\" placeholder=\"Model\">\r\n          <datalist id=\"ModelDatalistOptions\">\r\n            <option *ngFor=\"let model of models\" [value]=\"model.modelName\"></option>\r\n          </datalist>\r\n        </div>\r\n        <div class=\"col-8\">\r\n          <div class=\"input-group mb-3\">\r\n            <label for=\"exampleDataList\" class=\"form-label w-100\">Rok Produkcji</label>\r\n            <input formControlName=\"yearOfProduction\" type=\"text\" class=\"form-control\" placeholder=\"Rok produkcji\" aria-label=\"Rok produkcji\" aria-describedby=\"basic-addon1\">\r\n          </div>\r\n        </div>\r\n        <div class=\"col-8\">\r\n          <div class=\"input-group mb-3\">\r\n            <label for=\"exampleDataList\" class=\"form-label w-100\">Przebieg</label>\r\n            <input formControlName=\"mileage\" type=\"text\" class=\"form-control\" placeholder=\"Przebieg\" aria-label=\"Przebieg\" aria-describedby=\"basic-addon1\">\r\n          </div>\r\n        </div>\r\n        <div class=\"col-8 mb-3 position-relative\">\r\n          <label for=\"customSelect\" class=\"form-label\">Rodzaj paliwa</label>\r\n          <div class=\"customSelect\" id=\"customSelect\" (click)=\"displaySelectOptions()\">Wybierz rodzaje paliwa</div>\r\n          <div class=\"options position-absolute w-100 \" [ngClass]=\"{'displayOptions': optionsExpanded}\">\r\n            <div class=\"option\">\r\n              <input type=\"checkbox\" id=\"gasoline\" name=\"gasoline\" />\r\n              <label for=\"gasoline\">Gasoline</label>\r\n            </div>\r\n            <div class=\"option\">\r\n              <input type=\"checkbox\" id=\"petrol\" name=\"petrol\" />\r\n              <label for=\"petrol\">Petrol</label>\r\n            </div>\r\n            <div class=\"option\">\r\n              <input type=\"checkbox\" id=\"diesel\" name=\"diesel\" />\r\n              <label for=\"diesel\">Diesel</label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-8\">\r\n          <div class=\"input-group mb-3\">\r\n            <label for=\"exampleDataList\" class=\"form-label w-100\">Liczba drzwi</label>\r\n            <input formControlName=\"doorsAmount\" type=\"text\" class=\"form-control\" placeholder=\"Liczba drzwi\" aria-label=\"Liczba drzwi\" aria-describedby=\"basic-addon1\">\r\n          </div>\r\n        </div>\r\n        <div class=\"col-8\">\r\n          <div class=\"mb-3\">\r\n            <label for=\"TransmissionTypeDataList\" class=\"form-label\">Rodzaj skrzyni biegów</label>\r\n            <input formControlName=\"transmissionType\" class=\"form-control\" list=\"datalistOptions\" id=\"TransmissionTypeDataList\" placeholder=\"Rodzaj skrzyni biegów\">\r\n            <datalist id=\"TransmissionTypeDatalistOptions\">\r\n              <option *ngFor=\"let transmissionType of transmissionTypes\" [value]=\"transmissionType.typeName\"></option>\r\n            </datalist>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-8\">\r\n          <div class=\"mb-3\">\r\n            <label for=\"CarbodyDataList\" class=\"form-label\">Rodzaj nadwozia</label>\r\n            <input formControlName=\"carbodyType\" class=\"form-control\" list=\"datalistOptions\" id=\"CarbodyDataList\" placeholder=\"Rodzaj nadwozia\">\r\n            <datalist id=\"CarbodyDatalistOptions\">\r\n              <option *ngFor=\"let carbody of carbodies\" [value]=\"carbody.carbodyName\"></option>\r\n            </datalist>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-8\">\r\n          <div class=\"mb-3\">\r\n            <label for=\"vehicleImage\" class=\"form-label\">Zdjęcie pojazdu</label>\r\n            <input formControlName=\"vehicleImage\" class=\"form-control\" id=\"vehicleImage\" type=\"file\" (change)=\"fileChanged($event)\" multiple>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-8 mb-5\">\r\n          <div class=\"row\">\r\n            <div class=\"col-4 mb-2 d-flex justify-content-center\" *ngFor=\"let opElement of operationalEquipment\">\r\n              <input type=\"checkbox\" class=\"btn-check\" id=\"{{opElement.eqElement.elementName}}\" autocomplete=\"off\" (click)=\"updateValue(opElement)\">\r\n              <label class=\"btn btn-outline-primary\" for=\"{{opElement.eqElement.elementName}}\">{{opElement.eqElement.elementName}}</label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-8 d-flex justify-content-center\">\r\n          <button type=\"submit\" class=\"btn btn-primary w-auto submitBtn\">Dodaj pojazd</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </form>\r\n</section>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}